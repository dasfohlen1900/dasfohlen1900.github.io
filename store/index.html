<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Mini-Office Store</title>

<!-- Bungee Font -->
<link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">

<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background:#e6f2e6; /* sanftes Grün */
    margin:0;
    padding:0;
  }

  header {
    background:#000000; /* Schwarz */
    color:white;
    text-align:center;
    padding:20px;
    font-family: 'Bungee', cursive;
    font-size:32px;
    font-weight:bold;
  }

  main {
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:30px 10px;
  }

  form, #store, #loginContainer, #logoutBtn {
    width:100%;
    max-width:400px;
    background:white;
    padding:20px;
    margin:10px 0;
    border-radius:12px;
    box-shadow:0 5px 15px rgba(0,0,0,0.2);
    display:flex;
    flex-direction:column;
    gap:10px;
  }

  input, button {
    padding:12px;
    font-size:16px;
    border-radius:8px;
    border:1px solid #ccc;
  }

  button {
    background:#00703C; /* Gladbach-Grün */
    color:white;
    border:none;
    cursor:pointer;
    font-family: 'Bungee', cursive;
    font-weight:normal;
  }

  button:hover { background:#005f2b; }

  h2 {
    text-align:center;
    color:#000000;
    font-family: 'Bungee', cursive;
  }

  #store ul { list-style:none; padding:0; }

  #store li {
    background:#ffffff;
    margin:8px 0;
    padding:12px;
    border-radius:8px;
    box-shadow:0 3px 6px rgba(0,0,0,0.1);
    display:flex;
    justify-content:space-between;
    align-items:center;
  }

  #store a {
    color:white;
    text-decoration:none;
    background:#00703C;
    padding:6px 12px;
    border-radius:6px;
    font-family: 'Bungee', cursive;
  }

  #store a:hover { background:#005f2b; }
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { 
  getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword,
  signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyC4vkDRFGgoHZ8lyGY8VeYYtP6oA-PqaNs",
  authDomain: "lukovic-store.firebaseapp.com",
  projectId: "lukovic-store",
  storageBucket: "lukovic-store.firebasestorage.app",
  messagingSenderId: "519122370011",
  appId: "1:519122370011:web:d7bc0ec5cb066d4f033bfe"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const googleProvider = new GoogleAuthProvider();

document.addEventListener("DOMContentLoaded", () => {
  const loginForm = document.getElementById("loginForm");
  const registerForm = document.getElementById("registerForm");
  const loginGoogleBtn = document.getElementById("loginGoogle");
  const logoutBtn = document.getElementById("logoutBtn");
  const storeContent = document.getElementById("store");

  // Login mit E-Mail
  loginForm.addEventListener("submit", (e) => {
    e.preventDefault();
    const email = e.target.email.value;
    const password = e.target.password.value;
    signInWithEmailAndPassword(auth, email, password)
      .catch(err => alert("Login fehlgeschlagen: " + err.message));
  });

  // Registrierung mit E-Mail
  registerForm.addEventListener("submit", (e) => {
    e.preventDefault();
    const email = e.target.email.value;
    const password = e.target.password.value;
    createUserWithEmailAndPassword(auth, email, password)
      .then(() => alert("Registrierung erfolgreich! Sie sind jetzt angemeldet."))
      .catch(err => alert("Registrierung fehlgeschlagen: " + err.message));
  });

  // Google Login
  loginGoogleBtn.addEventListener("click", () => {
    signInWithPopup(auth, googleProvider).catch(err => alert("Fehler: " + err.message));
  });

  // Logout
  logoutBtn.addEventListener("click", () => {
    signOut(auth);
  });

  // Auth-State überwachen
  onAuthStateChanged(auth, (user) => {
    if(user){
      loginForm.style.display = "none";
      registerForm.style.display = "none";
      loginGoogleBtn.style.display = "none";
      logoutBtn.style.display = "block";
      storeContent.style.display = "block";
    } else {
      loginForm.style.display = "flex";
      registerForm.style.display = "flex";
      loginGoogleBtn.style.display = "block";
      logoutBtn.style.display = "none";
      storeContent.style.display = "none";
    }
  });
});
</script>
</head>

<body>
<header>Mini-Office Store – Gladbach Edition</header>
<main>

<form id="loginForm">
  <h2>Anmelden</h2>
  <input type="email" name="email" placeholder="E-Mail-Adresse" required>
  <input type="password" name="password" placeholder="Passwort" required>
  <button type="submit">Anmelden</button>
</form>

<form id="registerForm">
  <h2>Registrieren</h2>
  <input type="email" name="email" placeholder="E-Mail-Adresse" required>
  <input type="password" name="password" placeholder="Passwort (min. 6 Zeichen)" required>
  <button type="submit">Registrieren</button>
</form>

<div id="loginContainer">
  <button id="loginGoogle">Mit Google anmelden</button>
</div>

<button id="logoutBtn" style="display:none;">Abmelden</button>

<div id="store" style="display:none;">
  <h2>Lade dir hier die Apps herunter</h2>
  <ul>
    <li>
      <span>HTML-Version</span>
      <a href="/download/HTML.zip">Herunterladen</a>
    </li>
    <li>
      <span>EXE-Version</span>
      <a href="/download/EXE.zip">Herunterladen</a>
    </li>
  </ul>
</div>

</main>
</body>
</html>
