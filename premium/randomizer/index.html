<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Mini-Office Zufallstools – Pro</title>

<link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">

<style>
body{font-family:Segoe UI,sans-serif; padding:20px; background:#eef4fb; margin:0;}
h1{font-family:'Bungee',cursive; text-align:center; color:#333;}
section{margin-bottom:30px; padding:15px; background:#fff; border-radius:8px; box-shadow:0 0 5px rgba(0,0,0,0.1);}
textarea, select, input[type=number], input[type=text]{width:100%; margin-bottom:10px; padding:8px; border-radius:6px; border:1px solid #ccc;}
button{margin:5px 0; padding:10px 16px; cursor:pointer; background:#00703C; color:#fff; border:none; border-radius:8px; font-family:'Bungee',cursive;}
button:hover{background:#005f2b;}
#loginBox{max-width:400px; margin:30px auto;}
#logoutBtn{display:none; margin:20px auto; display:block;}
#appContent{display:none;}
canvas{display:block; margin:auto; background:#fff; border-radius:50%;}
#qrVideo{width:300px; height:300px; border:1px solid #ccc; margin:15px auto; display:none;}
</style>
</head>
<body>

<h1>Mini-Office Zufallstools – Pro</h1>

<div id="loginBox">
  <button id="scanCardBtn">Mini-Card scannen</button>
  <video id="qrVideo" autoplay></video>
  <input type="text" id="idInput" placeholder="Direkt mit ID anmelden">
  <button id="loginIdBtn">Anmelden mit ID</button>
</div>

<button id="logoutBtn">Abmelden</button>

<div id="appContent">
  <!-- Hier kommt der gesamte Tool-Content von der Originalseite (Zufall aus Liste, Gruppen, Glücksrad etc.) -->
</div>

<script type="module">
import QrScanner from 'https://cdn.jsdelivr.net/npm/qr-scanner@1.4.2/qr-scanner.min.js';

const scanCardBtn = document.getElementById('scanCardBtn');
const qrVideo = document.getElementById('qrVideo');
const idInput = document.getElementById('idInput');
const loginIdBtn = document.getElementById('loginIdBtn');
const loginBox = document.getElementById('loginBox');
const appContent = document.getElementById('appContent');
const logoutBtn = document.getElementById('logoutBtn');

// Alle gültigen IDs (Premium + Gast)
const allowedUsers = [
  {name:'Lukas', id:'008'},
  {name:'Jakob', id:'013'},
  {name:'Moritz', id:'002'},
  {name:'Jakobd', id:'009'},
  {name:'Gast', id:'661'},
  {name:'Gast', id:'662'},
  {name:'Gast', id:'663'}
];

function loginUser(user){
    localStorage.setItem('currentUserId', user.id);
    alert(`${user.name} angemeldet!`);
    loginBox.style.display='none';
    appContent.style.display='block';
    logoutBtn.style.display='block';
}

function checkLogin(){
    const id = localStorage.getItem('currentUserId');
    if(!id) return false;
    const user = allowedUsers.find(u=>u.id===id);
    if(!user) return false;
    loginUser(user);
    return true;
}

// QR-Scanner
scanCardBtn.addEventListener('click', ()=>{
    qrVideo.style.display = 'block';
    QrScanner.WORKER_PATH = 'https://cdn.jsdelivr.net/npm/qr-scanner@1.4.2/qr-scanner-worker.min.js';
    const scanner = new QrScanner(qrVideo,result=>{
        try{
            const data = JSON.parse(result);
            if(data.id && data.name){
                const user = allowedUsers.find(u=>u.id===data.id && (u.name===data.name || u.name==='Gast'));
                if(!user){ alert("Benutzer nicht erlaubt!"); return; }
                scanner.stop();
                loginUser(user);
            }
        } catch(e){ console.log("Ungültiger QR-Code"); }
    });
    scanner.start();
});

// Anmeldung per ID
loginIdBtn.addEventListener('click', ()=>{
    const id = idInput.value.trim();
    const user = allowedUsers.find(u=>u.id===id);
    if(!user){ alert("Ungültige ID!"); return; }
    loginUser(user);
});

// Logout
logoutBtn.addEventListener('click', ()=>{
    localStorage.removeItem('currentUserId');
    loginBox.style.display='block';
    appContent.style.display='none';
    logoutBtn.style.display='none';
});

// Prüfen, ob schon eingeloggt
checkLogin();
</script>

<!-- Hier kannst du den gesamten Tool-HTML/JS von der Originalseite unter #appContent einfügen -->

</body>
</html>
