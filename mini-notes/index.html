<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Mini-Notes</title>
<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;600&display=swap" rel="stylesheet">
<style>
body{
  font-family:'Work Sans',Arial,sans-serif;
  background:linear-gradient(180deg,#eef4fb,#fff);
  margin:0;padding:0;
  display:flex;justify-content:center;align-items:center;
  min-height:100vh;
}
.board{
  background:#fff;
  padding:20px;
  border-radius:16px;
  box-shadow:0 6px 20px rgba(0,0,0,0.08);
  width:90%;max-width:800px;
  display:flex;flex-direction:column;gap:16px;
}
h1{margin:0;text-align:center;color:#0f172a;}
.toolbar{
  display:flex;flex-wrap:wrap;
  gap:8px;justify-content:center;margin-bottom:6px;
}
button{
  padding:8px 12px;
  background:#f1f5f9;
  border:1px solid #d1d5db;
  border-radius:8px;
  cursor:pointer;font-size:1rem;
}
button:hover{background:#e2e8f0;}
.editor{
  border:1px solid #d1d5db;
  border-radius:12px;
  min-height:300px;
  padding:16px;
  outline:none;
}
.footer{
  display:flex;justify-content:space-between;align-items:center;
  font-size:0.9rem;color:#6b7280;flex-wrap:wrap;gap:8px;
}
input[type=file]{display:none;}
</style>
</head>
<body>
<div class="board">
  <h1>üìù Mini-Notes</h1>

  <div class="toolbar">
    <button onclick="cmd('bold')" title="Fett (B)">B</button>
    <button onclick="cmd('italic')" title="Kursiv (I)">I</button>
    <button onclick="cmd('underline')" title="Unterstrichen (U)">U</button>
    <button onclick="cmd('strikeThrough')" title="Durchgestrichen (S)">S</button>
    <button onclick="saveOctnt()">üíæ .octnt</button>
    <label style="padding:8px 12px;background:#0f172a;color:#fff;border-radius:8px;cursor:pointer;">
      üìÇ √ñffnen
      <input id="openFile" type="file" accept=".octnt,.html,.txt">
    </label>
    <button onclick="clearNotes()">Alles l√∂schen</button>
  </div>

  <div id="editor" class="editor" contenteditable="true" spellcheck="true">
    <p>Hier deine Notizen eingeben...</p>
  </div>

  <div class="footer">
    <span id="status">Alle √Ñnderungen gespeichert</span>
  </div>
</div>

<script>
const editor = document.getElementById('editor');
const statusEl = document.getElementById('status');
const openFile = document.getElementById('openFile');
const LS_KEY = 'mini_notes_octnt_v1';
let saveTimer=null;

/* ===== Autosave ===== */
editor.addEventListener('input', ()=>{
  statusEl.textContent = 'Speichern...';
  clearTimeout(saveTimer);
  saveTimer = setTimeout(()=>{
    localStorage.setItem(LS_KEY, editor.innerHTML);
    statusEl.textContent = 'Alle √Ñnderungen gespeichert';
  }, 500);
});

/* Vorhandene Notizen laden */
const saved = localStorage.getItem(LS_KEY);
if(saved) editor.innerHTML = saved;

/* ===== Formatierung ===== */
function cmd(command){
  document.execCommand('styleWithCSS', false, true);
  document.execCommand(command, false, null);
  editor.focus();
}

/* ===== .octnt speichern ===== */
function saveOctnt(){
  const blob = new Blob([editor.innerHTML], {type:'text/plain;charset=utf-8'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'notes.octnt';
  a.click();
  setTimeout(()=>URL.revokeObjectURL(a.href),2000);
}

/* ===== .octnt √∂ffnen ===== */
openFile.addEventListener('change', e=>{
  const file = e.target.files[0];
  if(!file) return;
  const r = new FileReader();
  r.onload = ()=>{
    localStorage.removeItem(LS_KEY); // alten Autosave l√∂schen
    editor.innerHTML = r.result.trim();
    statusEl.textContent = 'Datei geladen';
  };
  r.readAsText(file);
  openFile.value = '';
});

/* ===== Alles l√∂schen ===== */
function clearNotes(){
  if(confirm('Alle Notizen wirklich l√∂schen?')){
    editor.innerHTML = '';
    localStorage.removeItem(LS_KEY);
    statusEl.textContent = 'Notizen gel√∂scht';
  }
}
</script>
</body>
</html>
