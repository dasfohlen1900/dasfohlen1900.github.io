<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini-Pr√§sentator</title>

<!-- Lokale Icons -->
<style>
@font-face { font-family: 'IcoMoon'; src: url('fonts/icomoon.ttf'); }

body { margin:0; font-family: 'Work Sans', 'Roboto', sans-serif; background:#f7f9fc; display:flex; flex-direction:column; height:100vh; }
.ribbon { background: linear-gradient(#fdfdfd, #e9edf5); border-bottom:1px solid #c6c9d1; box-shadow:0 1px 3px rgba(0,0,0,0.1); }
.tabs { display:flex; border-bottom:1px solid #ccc; padding:4px 10px; }
.tab { padding:6px 14px; cursor:pointer; border-radius:5px 5px 0 0; margin-right:4px; font-weight:600; color:#333; }
.tab.active { background:#fff; border:1px solid #ccc; border-bottom:none; }
.tab-content { display:none; background:#fff; padding:10px; border-top:none; min-height:80px; }
.tab-content.active { display:block; }

.group { display:inline-block; vertical-align:top; padding:5px 10px; border-right:1px solid #ddd; }
.group:last-child { border-right:none; }

button.icon { font-family:'IcoMoon'; font-size:20px; background:none; border:none; cursor:pointer; margin:5px; transition:0.2s; }
button.icon:hover { background:#e6eaf2; border-radius:6px; }

#editor { flex-grow:1; background:white; margin:0; padding:20px; outline:none; font-size:16px; overflow-y:auto; min-height:200px; border:1px solid #ccc; border-radius:8px; }

select, input[type="color"], input[type="file"] { margin:4px; padding:3px; border:1px solid #ccc; border-radius:3px; font-family:inherit; }
</style>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;600&family=Roboto&family=Bungee&family=Signika&display=swap" rel="stylesheet">
</head>
<body>

<!-- Ribbon -->
<div class="ribbon">
  <div class="tabs">
    <div class="tab active" data-tab="file">Datei</div>
    <div class="tab" data-tab="home">Start</div>
    <div class="tab" data-tab="slide">Folie</div>
    <div class="tab" data-tab="present">Pr√§sentieren</div>
  </div>

  <!-- Datei -->
  <div class="tab-content active" id="file">
    <div class="group">
      <button class="icon" onclick="saveFile()">&#xe962;</button> <!-- Speichern -->
      <button class="icon" onclick="openFileInput.click()">&#xe930;</button> <!-- √ñffnen -->
      <input type="file" id="openFileInput" accept=".octpt" hidden onchange="openFile(this.files[0])">
    </div>
  </div>

  <!-- Start -->
  <div class="tab-content" id="home">
    <div class="group">
      <button class="icon" onclick="format('bold')">&#xea62;</button>
      <button class="icon" onclick="format('italic')">&#xea64;</button>
      <button class="icon" onclick="format('underline')">&#xea63;</button>
      <select id="fontSelect" onchange="formatFont()">
        <option value="Work Sans">Work Sans</option>
        <option value="Roboto">Roboto</option>
        <option value="Bungee">Bungee</option>
        <option value="Signika">Signika</option>
        <option value="Segoe UI">Segoe UI</option>
        <option value="Arial">Arial</option>
        <option value="Georgia">Georgia</option>
        <option value="Courier New">Courier New</option>
      </select>
      <select id="sizeSelect" onchange="formatSize()">
        <option value="16px">16px</option><option value="20px">20px</option>
        <option value="24px">24px</option><option value="32px">32px</option>
      </select>
      <input type="color" id="colorPicker" onchange="formatColor(this.value)" value="#000000">
    </div>
  </div>

  <!-- Folie -->
  <div class="tab-content" id="slide">
    <div class="group">
      <input type="text" id="titleInput" placeholder="Titel der Folie">
      <button class="btn" onclick="addSlide()">‚ûï Folie hinzuf√ºgen</button>
    </div>
  </div>

  <!-- Pr√§sentieren -->
  <div class="tab-content" id="present">
    <div class="group">
      <button class="btn" onclick="prevSlide()">&#xea44</button>
      <button class="btn" onclick="nextSlide()">&#xea42</button>
    </div>
  </div>
</div>

<!-- Editor -->
<div id="editor" contenteditable="true">
  <p>üñ§ü§çüíö Willkommen bei Mini-Pr√§sentator!</p>
</div>

<!-- Slide Area -->
<div id="slideArea" style="margin:10px auto; max-width:980px; background:white; border:1px solid #ccc; border-radius:8px; padding:15px; min-height:300px; text-align:center;">
  Keine Folien vorhanden
</div>

<script>
const tabs = document.querySelectorAll('.tab');
const contents = document.querySelectorAll('.tab-content');
const editor = document.getElementById('editor');
const openFileInput = document.getElementById('openFileInput');
let slides=[], current=0;

// Tab wechseln
tabs.forEach(tab=>{
  tab.addEventListener('click', ()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    contents.forEach(c=>c.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.tab).classList.add('active');
  });
});

// Textformatierung
function format(cmd,value=null){ document.execCommand(cmd,false,value); editor.focus(); }
function formatColor(c){ document.execCommand('foreColor',false,c); }
function formatFont(){ document.execCommand('fontName',false, document.getElementById('fontSelect').value); }
function formatSize(){
  const s=document.getElementById('sizeSelect').value;
  document.execCommand('fontSize',false,'4');
  const sel=window.getSelection();
  if(sel.rangeCount){ sel.focusNode.parentElement.style.fontSize=s; }
}

// Slides
function addSlide(){
  const title=document.getElementById('titleInput').value.trim();
  const content=editor.innerHTML.trim();
  if(!title && !content){ alert('Bitte Titel oder Inhalt eingeben'); return; }
  slides.push({title,content});
  document.getElementById('titleInput').value='';
  editor.innerHTML='';
  current=slides.length-1;
  showSlide();
}

function showSlide(){
  const area=document.getElementById('slideArea');
  if(slides.length===0){ area.textContent='Keine Folien vorhanden'; return; }
  const s=slides[current];
  area.innerHTML=`<div><h2 style="font-family:Bungee">${s.title||''}</h2>
      <div style="font-family:Signika;white-space:pre-wrap;text-align:left;">${s.content||''}</div></div>`;
}

function prevSlide(){ if(slides.length) { current=(current-1+slides.length)%slides.length; showSlide(); } }
function nextSlide(){ if(slides.length) { current=(current+1)%slides.length; showSlide(); } }

// Keyboard navigation
document.addEventListener('keydown',e=>{
  if(e.key==='ArrowLeft') prevSlide();
  if(e.key==='ArrowRight') nextSlide();
});

// Speichern / Laden
function saveFile(){
  if(slides.length===0){ alert('Keine Folien zum Speichern'); return; }
  const html=encodeURIComponent(JSON.stringify(slides));
  const blob=new Blob([html],{type:'text/plain'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='presentation.octpt';
  a.click();
  URL.revokeObjectURL(a.href);
}

function openFile(file){
  if(!file) return;
  const reader=new FileReader();
  reader.onload=e=>{
    try{
      slides=JSON.parse(decodeURIComponent(e.target.result));
      current=0;
      showSlide();
    }catch(err){ alert('Datei konnte nicht gelesen werden.'); }
  };
  reader.readAsText(file);
}
</script>
</body>
</html>
